Especificaciones de la aplicaci√≥n "Qu√© Comemos"

1. Descripci√≥n General
   ‚ÄúQu√© Comemos‚Äù es una aplicaci√≥n web progresiva (PWA) enfocada a facilitar la decisi√≥n diaria de qu√© cocinar, ayudando a planificar comidas en base a los ingredientes disponibles en casa. La app permitir√° gestionar un inventario de ingredientes que el usuario tiene en su despensa, mantener un recetario personal, y ofrecer sugerencias de platos a cocinar cada d√≠a. Para obtener nuevas ideas, la aplicaci√≥n podr√° buscar recetas externas en una base de datos abierta (TheMealDB) o generar recetas creativas mediante un modelo de IA local (GPT-OSS-20B v√≠a Ollama). La interfaz ser√° sencilla, amigable y de estilo cute, adecuada tanto para dispositivos m√≥viles Android (como PWA instalable) como para navegadores web de escritorio. La aplicaci√≥n funcionar√° completamente offline para sus funciones principales, aprovechando almacenamiento local y capacidades PWA; las funciones en l√≠nea (b√∫squeda de recetas externas) ser√°n opcionales y controladas por el usuario mediante configuraciones.
2. Gesti√≥n de Inventario de Ingredientes
   Esta vista permite al usuario a√±adir y organizar todos los ingredientes que tiene en su cocina, sirviendo como base para sugerir recetas. Las caracter√≠sticas de la vista de Inventario incluyen:
   ‚Ä¢ Lista de ingredientes: muestra cada ingrediente almacenado, con su nombre, categor√≠a (p. ej. verdura, legumbre, carne, fruta, etc.) y cantidad disponible. El usuario ingresa la cantidad en la unidad que prefiera (ej. ‚Äú2 kg‚Äù, ‚Äú3 latas‚Äù, ‚Äú500 g‚Äù, ‚Äú1 botella‚Äù). Los datos se guardan localmente en IndexedDB para persistencia offline.
   ‚Ä¢ B√∫squeda y filtrado: incluye una barra de b√∫squeda para filtrar r√°pidamente los ingredientes por nombre conforme se escribe. Adem√°s, un checkbox ‚ÄúIncluir ingredientes globales‚Äù permitir√° buscar tambi√©n en la base de datos global de ingredientes de TheMealDB cuando est√© activado (y haya conexi√≥n). Si este checkbox est√° marcado, al introducir texto de b√∫squeda la app comparar√° con los ingredientes locales y con la lista global de ~647 ingredientes conocida por TheMealDB[1][2]. Los ingredientes externos coincidentes (que el usuario a√∫n no tenga en su inventario) se mostrar√°n como sugerencias adicionales (junto con su imagen si existe) para que el usuario pueda agregarlos f√°cilmente a la lista. (Ejemplo: el usuario escribe ‚Äútomate‚Äù con la opci√≥n global activa; la app sugiere su ‚ÄúTomato‚Äù de la base externa con √≠cono, para a√±adir). Si el checkbox est√° desmarcado (modo offline), la b√∫squeda se limita √∫nicamente a los ingredientes locales.
   ‚Ä¢ Categor√≠as de ingredientes: al a√±adir o editar un ingrediente, se podr√° asignar una categor√≠a de entre una lista predefinida (verduras, frutas, carnes, l√°cteos, granos, especias, etc.). Esto ayuda a organizar el inventario y podr√≠a usarse para filtrar o mostrar agrupados los ingredientes. (Por ejemplo, en la UI los ingredientes podr√≠an agruparse por categor√≠a).
   ‚Ä¢ Edici√≥n de ingredientes: el usuario puede a√±adir nuevos ingredientes (introduciendo nombre, categor√≠a y cantidad), modificar los existentes (por ejemplo, actualizar la cantidad tras usar algo) o eliminarlos de la lista. La introducci√≥n de nuevos ingredientes se facilita con la b√∫squeda global mencionada: si la app encuentra el ingrediente en la base de datos externa, puede autocompletar el nombre correctamente y mostrar un icono ilustrativo (TheMealDB provee im√°genes PNG transparentes de ingredientes por nombre[3]). La categor√≠a inicial la selecciona el usuario (la app no siempre puede deducirla autom√°ticamente).
   ‚Ä¢ Almacenamiento local: toda la informaci√≥n de inventario se almacena en la IndexedDB del navegador para persistencia. Esto permite que la lista de ingredientes est√© disponible offline y se conserve entre sesiones. No se requiere registro ni sincronizaci√≥n en la nube (los datos son locales al dispositivo, acorde al requisito de funcionamiento local).
   ‚Ä¢ Interfaz de inventario: dise√±ada para ser clara y amigable. Cada item podr√≠a mostrarse con un peque√±o icono (por ejemplo, usando las im√°genes de ingrediente de TheMealDB si est√°n disponibles), el nombre, la cantidad/unidad y quiz√° un color o etiqueta de categor√≠a. La vista soportar√° desplazamiento en listas largas y ser√° responsiva para mostrarse en m√≥vil con un dise√±o de tarjetas o lista simple. La barra de b√∫squeda estar√° fija en la parte superior para f√°cil acceso.
3. Gesti√≥n de Recetas Personalizadas
   La aplicaci√≥n ofrece una vista ‚ÄúRecetas‚Äù donde el usuario puede almacenar y consultar sus propias recetas. Las caracter√≠sticas de esta secci√≥n incluyen:
   ‚Ä¢ Lista de recetas guardadas: se mostrar√°n las recetas a√±adidas por el usuario (inicialmente esta lista estar√° vac√≠a hasta que agregue alguna). Por cada receta se listar√° al menos el t√≠tulo y quiz√°s etiquetas o un indicador si requiere ingredientes que no est√°n en inventario (esto √∫ltimo din√°micamente, ver m√°s abajo). Puede mostrarse en forma de listado simple o tarjetas con el nombre de la receta e √≠cono (si la receta tiene imagen asociada, o un √≠cono gen√©rico de plato).
   ‚Ä¢ B√∫squeda de recetas: la vista incluye una barra de b√∫squeda para filtrar las recetas por texto. Se buscar√° coincidencia en el nombre de la receta y potencialmente en los ingredientes o etiquetas. Adicionalmente, dispone de un checkbox ‚ÄúIncluir resultados de internet‚Äù que el usuario puede activar para extender la b√∫squeda a la API externa de TheMealDB. Si este checkbox est√° marcado, al realizar una b√∫squeda la app consultar√° la API (por ejemplo, usando el endpoint de b√∫squeda por nombre) para obtener recetas p√∫blicas que coincidan con el t√©rmino buscado. Esas recetas externas se mostrar√°n junto con las locales, claramente distinguidas (por ejemplo, con un estilo diferente o una etiqueta ‚Äúüåê‚Äù). Si el checkbox est√° desactivado, la b√∫squeda se har√° offline solo entre las recetas locales (ideal cuando no hay conexi√≥n o se desea limitar resultados). Esta opci√≥n proporciona control al usuario y asegura que la funcionalidad de b√∫squeda funcione offline sin intentar llamadas externas.
   ‚Ä¢ Recetas externas en b√∫squeda: En caso de buscar con la opci√≥n de internet activa, la app utilizar√° la API de TheMealDB para obtener recetas. TheMealDB permite buscar por nombre de platillo o filtrar por ingrediente/categor√≠a[4][5]. En este contexto, se usar√° principalmente la b√∫squeda por nombre (e.g. search.php?s=<nombre>). Las recetas encontradas incluir√°n datos como lista de ingredientes, cantidades, instrucciones y foto del plato. Solo se mostrar√°n resultados con buena informaci√≥n (TheMealDB es una base colaborativa de calidad con recetas de todo el mundo[6]). El usuario puede seleccionar una de estas recetas externas para ver sus detalles completos e incluso guardarla en su recetario si lo desea. (Al guardar, se crear√° una entrada local en IndexedDB con todos sus datos, para tenerla disponible offline en adelante). Nota: La aplicaci√≥n no traducir√° autom√°ticamente las recetas externas; muchas vienen en ingl√©s y algunas en espa√±ol. En la interfaz en espa√±ol, se podr√≠a indicar que la receta es originalmente en otro idioma si aplica, o permitir al usuario traducir manualmente la descripci√≥n si lo desea. (Como mejora futura, se podr√≠a aprovechar el modelo local de IA para traducir instrucciones si es necesario).
   ‚Ä¢ A√±adir nueva receta (personal): el usuario puede crear recetas propias pulsando un bot√≥n ‚ÄúA√±adir receta‚Äù. Se abrir√° un formulario donde introducir: T√≠tulo de la receta, etiquetas/categor√≠as (por ejemplo, tipo de plato: pasta, postre, vegetariano, etc.), lista de ingredientes con cantidades necesarios, y elaboraci√≥n (pasos o instrucciones). Para la lista de ingredientes de la receta, se proveer√°n campos para ingresar el nombre del ingrediente y la cantidad/unidad requerida (p. ej. ‚ÄúHarina ‚Äì 200 g‚Äù; ‚ÄúHuevos ‚Äì 3 unidades‚Äù). Si el nombre del ingrediente coincide con alguno del inventario, ser√≠a ideal enlazarlo (por nombre) para luego detectar disponibilidad. La receta puede tener tantos ingredientes como se necesite. La secci√≥n de elaboraci√≥n soportar√° Markdown, permitiendo al usuario dar formato (listas, negritas, etc.) para una lectura m√°s clara.
   ‚Ä¢ Edici√≥n y borrado de recetas: las recetas personalizadas podr√°n ser editadas posteriormente (por si el usuario quiere ajustar cantidades, corregir pasos, etc.) y tambi√©n eliminadas si lo desea.
   ‚Ä¢ Estructura de datos: cada receta local se almacenar√° en IndexedDB como un objeto con campos: id, t√≠tulo, ingredientes (lista de sub-objetos {nombreIngrediente, cantidad, unidad}), instrucciones (texto Markdown), etiquetas (lista de etiquetas/categor√≠as), e idioma o indicaci√≥n de origen si se desea (para marcar si fue generada, importada, etc.). Si la receta tiene una imagen asociada, podr√≠a almacenarse una URL (por ejemplo, recetas importadas de TheMealDB traen un URL de imagen). En el caso de recetas generadas por IA o a√±adidas manualmente sin imagen, se puede usar un placeholder o permitir que el usuario adjunte una foto (esta funcionalidad de adjuntar im√°genes se considera opcional para no complicar demasiado el desarrollo inicialmente).
   ‚Ä¢ Vista de detalle de receta: al seleccionar una receta de la lista (sea local o externa encontrada), se mostrar√° el detalle completo: t√≠tulo, imagen (si disponible), lista de ingredientes con cantidades, instrucciones formateadas (renderizando el Markdown si aplica), y etiquetas. Si es una receta externa a√∫n no guardada, se mostrar√° la opci√≥n de ‚ÄúGuardar en mis recetas‚Äù para a√±adirla al recetario local. Si es una receta local, podr√≠a ofrecer opci√≥n de ‚ÄúEditar‚Äù o ‚ÄúEliminar‚Äù. Tambi√©n se indicar√° la disponibilidad de ingredientes seg√∫n el inventario (ver secci√≥n siguiente).
   ‚Ä¢ Indicador de ingredientes disponibles: en la lista de recetas guardadas, ser√≠a √∫til un indicativo r√°pido de si se puede preparar con lo que hay en casa. Por ejemplo, podr√≠a mostrarse un icono verde si todos los ingredientes est√°n en inventario, amarillo si faltan algunos, rojo si faltan muchos. Al entrar al detalle de una receta (local o externa), la app comparar√° la lista de ingredientes de la receta con el inventario actual y resaltar√° cu√°les ingredientes no est√°n disponibles o est√°n incompletos. De hecho, generar√° una ‚ÄúLista de la compra‚Äù con esos faltantes.
4. Vista Principal ‚Äì Decidir ‚Äú¬øQu√© comemos?‚Äù
   La vista principal (home) de la aplicaci√≥n es donde el usuario va a decidir qu√© cocinar/comer en un momento dado, utilizando la informaci√≥n de inventario y recetas. Esta pantalla gu√≠a al usuario paso a paso:
   ‚Ä¢ Selecci√≥n inicial (filtros): La pantalla comienza preguntando esencialmente ‚Äú¬øQu√© te apetece cocinar?‚Äù ofreciendo varias formas de pre-seleccionar criterios:
   ‚Ä¢ Elegir una receta espec√≠fica: El usuario puede seleccionar una de sus recetas guardadas (por ejemplo, mediante un desplegable o lista de sus recetas favoritas/recentes) si ya tiene en mente algo concreto.
   ‚Ä¢ Elegir una etiqueta/categor√≠a de receta: Alternativamente, puede seleccionar una categor√≠a general (por ejemplo ‚ÄúPlato r√°pido‚Äù, ‚ÄúVegetariano‚Äù, ‚ÄúPostre‚Äù) para filtrar las opciones. Esto utiliza las etiquetas asignadas a las recetas.
   ‚Ä¢ Elegir ingredientes disponibles: El usuario puede elegir de 0 a N ingredientes de su inventario que le gustar√≠a usar en la receta. Puede ser mediante casillas de verificaci√≥n en la lista de inventario o un selector m√∫ltiple. (Si la lista de inventario es muy larga, este selector incluir√° su propio campo de b√∫squeda interna para encontrar ingredientes r√°pidamente).
   El usuario puede combinar estas opciones para afinar la b√∫squeda de recetas sugeridas. Por ejemplo: ‚ÄúVer recetas italianas que usen tomate y albahaca‚Äù (seleccionando etiqueta "Italiana" y los ingredientes "Tomate" y "Albahaca"). Si no selecciona nada (ni receta, ni ingredientes, ni etiqueta), se considerar√° que est√° abierto a cualquier sugerencia.
   ‚Ä¢ Confirmar criterios: Una vez elegidos los criterios (o ninguno), el usuario pasa al siguiente paso (por ejemplo, pulsando un bot√≥n ‚ÄúBuscar recetas‚Äù o ‚ÄúSiguiente‚Äù). La app entonces proceder√° de dos maneras seg√∫n el caso:
   ‚Ä¢ Caso A ‚Äì Receta preseleccionada: Si el usuario escogi√≥ directamente una de sus recetas, la aplicaci√≥n mostrar√° directamente el detalle de esa receta (similar a la vista de detalle de la secci√≥n Recetas). Adicionalmente, mostrar√° la lista de la compra con los ingredientes faltantes para esa receta. Cada ingrediente faltante se listar√° con la cantidad necesaria, permitiendo al usuario preparar su viaje al supermercado si hace falta. Nota: Esta lista de la compra es meramente informativa para el usuario; no habr√° integraci√≥n con compras en l√≠nea ni pedidos ‚Äì la idea es que el usuario use esta lista para comprar f√≠sicamente lo que falte, marcando mentalmente o manualmente los √≠tems al conseguirlos. No se realizar√°n compras ni pagos a trav√©s de la app, s√≥lo se facilita la lista de ingredientes a adquirir.
   ‚Ä¢ Caso B ‚Äì B√∫squeda de receta (no preseleccionada): Si el usuario no eligi√≥ una receta espec√≠fica, la app buscar√° sugerencias en base a los ingredientes y/o etiqueta indicados:
   ‚ó¶ Filtrar recetas locales: Primero, se filtrar√°n las recetas del recetario personal que coincidan con los criterios. Si se indicaron ingredientes, se obtendr√°n las recetas que contengan todos esos ingredientes seleccionados (o al menos los principales; se podr√≠a considerar incluir recetas que tengan alguno de ellos, pero lo m√°s √∫til es requerir que est√©n todos para asegurar que usan lo que el usuario quiere aprovechar). Si no se indic√≥ ingrediente alguno, se toman todas las recetas locales. Luego, si adem√°s se indic√≥ una etiqueta, se filtrar√°n esas recetas al subset de dicha categor√≠a. El resultado es una lista de recetas locales que cumplen con los filtros (si la lista es muy grande, se podr√≠an ordenar quiz√° por ‚Äúmejor coincidencia‚Äù o simplemente alfab√©ticamente).
   ‚ó¶ Buscar recetas externas (opcional): Adem√°s de las recetas locales, la app puede consultar recetas en TheMealDB que encajen con los criterios. Si el usuario tiene conexi√≥n y desea ver m√°s opciones, la aplicaci√≥n podr√≠a autom√°ticamente (o mediante un toggle similar al de la b√∫squeda manual) realizar una b√∫squeda en la API externa: por ejemplo, si se eligieron ingredientes, usar el filtro por ingrediente principal[4] (limitado a uno principal en el plan gratuito) o por categor√≠a/√°rea si se seleccion√≥ etiqueta (TheMealDB permite filtrar por categor√≠a de plato o regi√≥n de cocina[5]). Dado que la API gratuita no soporta filtro por m√∫ltiples ingredientes simult√°neamente sin upgrade, si el usuario seleccion√≥ varios ingredientes podr√≠amos hacer una b√∫squeda incremental (e.g. filtrar por el primero y luego filtrar esos resultados localmente por los otros ingredientes). En cualquier caso, se obtendr√° una lista de recetas externas potencialmente interesantes. Para asegurar calidad, podr√≠amos confiar en que TheMealDB ya contiene recetas populares o con buen puntaje (no se dispone de rating num√©rico en esa API, pero la base es colaborativa y de calidad razonable).
   ‚ó¶ Generar nuevas recetas con IA: Adem√°s de buscar recetas existentes, la app ofrecer√° la opci√≥n ‚ÄúGenerar receta nueva‚Äù usando la IA local. Esta opci√≥n tomar√° al menos los ingredientes seleccionados como base (si no se seleccion√≥ ninguno, la IA tendr√° libertad total de inventar un plato). Al activar esta opci√≥n, se enviar√° una solicitud al modelo GPT-OSS-20B (a trav√©s de Ollama) para que genere una receta original, incluyendo nombre del plato, ingredientes (con cantidades) y la preparaci√≥n, intentando cumplir con las caracter√≠sticas solicitadas (por ejemplo, podr√≠amos indicarle que cree ‚Äúuna receta digna de un chef con estrella Michelin‚Äù usando esos ingredientes para obtener un resultado creativo y de calidad). La respuesta del modelo tardar√° unos instantes (seg√∫n hardware), por lo que la UI mostrar√° un indicador de carga ‚Äúpensando‚Ä¶‚Äù mientras tanto. Una vez generada, la receta AI se presentar√° en pantalla de detalle similar a cualquier receta. El usuario podr√° entonces decidir descartarla (si no le convence) o guardarla en Recetas para conservarla y quiz√°s probarla en otro momento.
   ‚ó¶ Presentaci√≥n de resultados: La pantalla mostrar√°, de forma organizada, las recetas sugeridas de acuerdo a lo anterior. Posiblemente se dividir√° en secciones: primero recetas locales coincidientes, luego recetas externas (si se busc√≥) y/o un bot√≥n para generar con IA. Cada resultado se mostrar√° con su t√≠tulo, fuente (local/externa/AI), quiz√° una imagen si disponible (por ejemplo, las externas traer√°n thumbnail desde TheMealDB[7], las locales podr√≠an mostrar una gen√©rica o ninguna a menos que el usuario haya a√±adido foto). Tambi√©n se puede mostrar un breve detalle como el tiempo de cocina o dificultad si esas propiedades estuvieran disponibles (no contemplado inicialmente, pero podr√≠a derivarse de etiquetas).
   ‚ó¶ Selecci√≥n de receta sugerida: El usuario puede tocar/click en cualquiera de las recetas sugeridas para ver el detalle completo. Si es una receta local, ya sabemos los datos; si es externa, la app entonces har√° una llamada para obtener la informaci√≥n completa por ID (usando lookup.php?i= de TheMealDB[8]) y mostrar√° todos sus ingredientes, medidas e instrucciones. En ambos casos, se calcular√° la lista de ingredientes faltantes comparando con el inventario. Esta lista de la compra de faltantes se presentar√° en un recuadro, igual que en el Caso A, indicando qu√© hay que comprar y en qu√© cantidad para realizar esa receta. Nuevamente, esto es solo informativo para que el usuario pueda ir a comprar; no hay funcionalidad de comprar en l√≠nea. Si la receta proven√≠a de la base externa y al usuario le ha gustado, tendr√° la opci√≥n de guardarla en su Recetario (lo que copiar√° todos sus datos a la base local IndexedDB, incluyendo quiz√°s la imagen en cach√©). Si la receta vino de la generaci√≥n IA, igualmente podr√° guardarse. Al guardar, esas recetas pasan a estar disponibles offline en la secci√≥n Recetas.
   ‚Ä¢ Iteraci√≥n o nueva b√∫squeda: Tras ver una receta sugerida, el usuario podr√≠a regresar atr√°s para ver otras opciones sugeridas. Los criterios seleccionados inicialmente permanecer√≠an hasta que los cambie, facilitando explorar varias recetas que cumplen las mismas condiciones. Tambi√©n podr√≠a refinar la b√∫squeda (agregar/quitar un ingrediente filtro, cambiar de categor√≠a) para obtener diferentes resultados. La interfaz debe hacer esto fluido, por ejemplo permitiendo navegar entre resultados sugeridos sin perder el estado de la lista.
   ‚Ä¢ Consideraciones offline: la vista principal funcionar√° completamente offline con las recetas locales y la generaci√≥n por IA. Si el dispositivo no tiene conexi√≥n, simplemente no estar√°n disponibles los resultados de la API externa, pero el usuario seguir√° pudiendo elegir de sus recetas o generar nuevas. El checkbox u opci√≥n para incluir resultados de internet se podr√≠a deshabilitar autom√°ticamente en ausencia de red. As√≠ mantenemos la promesa de que la app es usable en cualquier momento y lugar.
5. Integraci√≥n de Inteligencia Artificial (Generador de Recetas IA)
   Una parte innovadora de "Qu√© Comemos" es su capacidad de generar recetas nuevas mediante IA, funcionando localmente sin depender de servicios externos de pago. Para lograr esto:
   ‚Ä¢ Se utilizar√° Ollama como backend local para el modelo de lenguaje GPT-OSS-20B (un modelo open-source de ~20 mil millones de par√°metros). El desarrollador ya dispone de este modelo descargado e instalado, y Ollama expone una API REST local (por defecto en http://localhost:11434) para interactuar con modelos[9][10]. La aplicaci√≥n (si corre en el mismo PC que Ollama, o quiz√°s v√≠a LAN) enviar√° peticiones a esta API.
   ‚Ä¢ Solicitud de generaci√≥n: Cuando el usuario solicite una receta AI (desde la vista principal), la app formar√° un prompt detallado para el modelo. Por ejemplo, podr√≠a enviar un mensaje del estilo: "Eres un chef profesional con estrella Michelin. Crea una receta original que incluya los siguientes ingredientes: [lista de ingredientes seleccionados]. Proporciona un nombre de plato creativo, lista de ingredientes con cantidades concretas y pasos de preparaci√≥n detallados en un tono gourmet." Adem√°s, se indicar√° al modelo en qu√© idioma responder seg√∫n el idioma activo de la app (es decir, si el usuario usa la interfaz en espa√±ol, pediremos la receta en espa√±ol; en ingl√©s, en ingl√©s). De esta manera, la receta generada ser√° adecuada al idioma del usuario.
   ‚Ä¢ Procesamiento de respuesta: La respuesta de GPT-OSS-20B vendr√° probablemente como texto libre describiendo la receta. Idealmente, se intentar√° formatear la salida en Markdown (por ejemplo, con los ingredientes enumerados, pasos numerados, etc.) para que se pueda mostrar de forma agradable. Incluso se podr√≠a configurar el modelo para retornar un JSON estructurado con campos (t√≠tulo, ingredientes, pasos), dado que GPT-OSS tiene capacidades de salida estructurada, pero esto puede no ser necesario; parsear el Markdown puede ser suficiente. La app tomar√° la respuesta y la mostrar√° al usuario. Si la salida est√° en Markdown, se renderizar√° apropiadamente (listas, encabezados, etc. para ingredientes y pasos).
   ‚Ä¢ Verificaci√≥n de ingredientes: Para integrar con la funcionalidad de lista de compra, la aplicaci√≥n intentar√° extraer del texto generado la lista de ingredientes y cantidades. Si el modelo devolvi√≥ la receta bien formateada (ej. una secci√≥n "Ingredientes:" seguida de √≠tems), se puede parsear esas l√≠neas para obtener cada ingrediente. Luego se compara contra el inventario para marcar faltantes, igual que con cualquier receta. Cabe se√±alar que el modelo podr√≠a incluir ingredientes no previstos; el usuario debe revisar y decidir si los tiene o no.
   ‚Ä¢ Iteraci√≥n y ajustes: Si la receta AI no convence, el usuario puede descartarla. Podr√≠amos ofrecer la opci√≥n de "Generar otra diferente" manteniendo los mismos ingredientes, por si quieren otra idea (simplemente reenviando el prompt; dado el componente aleatorio del modelo, es probable que cree una variaci√≥n). Tambi√©n podr√≠amos permitir una breve retroalimentaci√≥n en el prompt (ej. "hacerla m√°s picante" o "menos ingredientes"), aunque eso a√±ade complejidad en la UI, por lo que inicialmente no se considera.
   ‚Ä¢ Guardado de receta generada: Si la receta gusta, el usuario la guardar√° llenando un formulario de confirmaci√≥n (podemos precargar los campos con lo generado para que simplemente confirme o edite detalles si desea). Se almacenar√° entonces en su Recetario local, igual que una receta manual, y a partir de ah√≠ se comporta como cualquier otra receta.
   ‚Ä¢ Performance: Ejecutar GPT-OSS-20B localmente puede requerir un hardware potente (16GB+ RAM/VRAM). La app asumir√° que el usuario ya tiene Ollama y el modelo corriendo en un equipo capaz. En caso de uso en m√≥vil, probablemente la generaci√≥n IA se har√≠a conect√°ndose a Ollama corriendo en otro lugar (ej. la PC de casa) v√≠a LAN, ya que dif√≠cilmente un tel√©fono podr√≠a correr este modelo. Esta configuraci√≥n queda a criterio del usuario t√©cnico, pero en la especificaci√≥n contemplamos que la app pueda comunicarse con el endpoint local (posiblemente permitiendo configurar la URL del servidor Ollama en ajustes, para soportar escenarios donde la PWA en m√≥vil accede al PC v√≠a IP local). Si la app no consigue conectarse al servicio de IA (por ejemplo, no est√° activo), mostrar√° un error amigable y sugerir√° verificar que Ollama est√© en ejecuci√≥n.
   ‚Ä¢ Privacidad: Todo el proceso de generaci√≥n es local, cumpliendo con el requisito de operar offline y no enviar datos sensibles a la nube. Los ingredientes del usuario y las recetas generadas permanecen en su dispositivo.
6. Integraci√≥n con API de Recetas Externas (TheMealDB)
   Para ampliar el repertorio de recetas disponibles y aprovechar datos existentes, "Qu√© Comemos" se integrar√° con la API TheMealDB, que es una base de datos abierta de recetas de todo el mundo[6]. Esta integraci√≥n ofrece las siguientes ventajas y detalles de implementaci√≥n:
   ‚Ä¢ Funcionalidad ofrecida: TheMealDB proporciona ~362 recetas y 647 ingredientes (datos actuales) de diversas categor√≠as y nacionalidades[1]. Permite buscar recetas por nombre, filtrar por categor√≠a de plato (ej. "Seafood", "Dessert"), por √°rea geogr√°fica o cocina (ej. "Mexican", "Italian"), y por ingrediente principal[4][5]. La API tambi√©n devuelve para cada receta su lista completa de ingredientes (con medidas), instrucciones, categor√≠a, √°rea, URL de imagen del platillo, y a veces enlaces a video o fuente original. Asimismo, ofrece im√°genes individuales de ingredientes (en varios tama√±os) y listados de todos los nombres de ingredientes, categor√≠as y √°reas disponibles[2][3].
   ‚Ä¢ Uso en la app: La aplicaci√≥n aprovechar√° TheMealDB en dos escenarios principales: (1) b√∫squeda de recetas externas en la vista Recetas (cuando el usuario as√≠ lo solicite mediante el checkbox de incluir internet), y (2) sugerencias en la vista principal (cuando el usuario busca opciones con ciertos ingredientes o categor√≠as y decide ver m√°s resultados de internet). En ambos casos, la app har√° llamadas a los endpoints gratuitos de la API (utilizando la clave de prueba "1" durante desarrollo[11]). Por ejemplo:
   ‚Ä¢ B√∫squeda por nombre: GET https://www.themealdb.com/api/json/v1/1/search.php?s=<texto> para obtener recetas cuyo nombre contenga <texto>.
   ‚Ä¢ Filtro por ingrediente: GET https://www.themealdb.com/api/json/v1/1/filter.php?i=<ingrediente> para listar recetas que incluyen cierto ingrediente (devuelve id, nombre y thumbnail de cada platillo).
   ‚Ä¢ Filtro por categor√≠a o √°rea: filter.php?c=<cat> o filter.php?a=<area> para recetas de cierta categor√≠a (ej. "Vegetarian") o regi√≥n culinaria (ej. "Italian").
   ‚Ä¢ Detalle de receta: lookup.php?i=<id> para obtener todos los detalles de una receta espec√≠fica por su ID √∫nico.
   ‚Ä¢ Plan de uso y cuotas: TheMealDB tiene un plan gratuito muy generoso: acceso libre a casi todas las funciones, sin necesidad de autenticaci√≥n para la clave "1". Sin embargo, para publicar la app se requerir√≠a convertirse en supporter (pago √∫nico de ~$10) y obtener una API Key propia[11]. Esto habilitar√≠a adem√°s algunas funciones premium como filtrar por m√∫ltiples ingredientes en una sola llamada[4] y a√±adir recetas propias a la base externa, aunque esto √∫ltimo no es necesario para nosotros. En la especificaci√≥n consideramos principalmente el uso gratuito, con la posibilidad de mejorar a premium si se desea la comodidad de filtros multi-ingrediente en un futuro.
   ‚Ä¢ Implementaci√≥n offline-first: Para mantener la experiencia offline, el uso de la API ser√° opcional y bajo control del usuario. Como descrito antes, hay checkboxes para incluir/excluir resultados de internet en las b√∫squedas. Adem√°s, la app puede implementar cach√© de resultados externos: por ejemplo, si una receta externa es consultada (su detalle) y guardada, esa informaci√≥n queda almacenada localmente. Incluso podr√≠amos anticipar y cachear listas b√°sicas como todas las categor√≠as, todas las √°reas, e incluso la lista completa de ingredientes (647 no es mucho) al instalar la app o cuando haya conectividad, de modo que algunas funciones de exploraci√≥n no requieran llamada en tiempo real. Esto alineado con ser PWA: podr√≠amos guardar en IndexedDB los cat√°logos de categor√≠as e ingredientes globales para usarlos offline.
   ‚Ä¢ Idioma y localizaci√≥n: TheMealDB, como se dijo, est√° principalmente en ingl√©s. Sin embargo, incluye algunas recetas con nombres (y posiblemente instrucciones) en otros idiomas si fueron a√±adidas as√≠ por colaboradores. Por ejemplo, "Arroz con gambas y calamar" aparece en la lista de √∫ltimas recetas[12], indicando que hay recetas en espa√±ol tambi√©n. No obstante, la mayor√≠a de recetas internacionales aparecen con instrucciones en ingl√©s. La aplicaci√≥n mostrar√° los datos tal cual los recibe. Para no mezclar idiomas en la UI, se puede etiquetar la receta externa con su idioma original si es diferente al de la interfaz (p.ej., si la app est√° en espa√±ol y la receta est√° en ingl√©s, podr√≠a indicarse ‚ÄúReceta en ingl√©s‚Äù en alguna parte). No implementaremos traducci√≥n autom√°tica en esta versi√≥n. En cuanto a los ingredientes provenientes de la API, estos tambi√©n suelen venir en ingl√©s (p.ej., "Chicken" en vez de "Pollo"), salvo casos puntuales. Dado que en el inventario el usuario quiz√° use nombres en su idioma, puede haber peque√±as discrepancias (ej. la receta externa pide "Butter" pero el usuario tiene "Mantequilla" en inventario y quiz√°s no lo reconoce como lo mismo). Este es un desaf√≠o de localizaci√≥n que mencionamos al usuario; por ahora, la comparaci√≥n de ingredientes receta-inventario se har√° por nombre exacto o equivalentes que el usuario haya ingresado. Podr√≠a mitigarse agregando alias en la base de datos local (permitir indicar que "Butter" = "Mantequilla") o simplemente siendo flexible con may√∫sculas/acentos. Se dejar√° como potencial mejora manejar sin√≥nimos multilenguaje en el futuro.
   ‚Ä¢ Im√°genes y multimedia: Las recetas de TheMealDB vienen con un URL de imagen del platillo (JPEG) y la API tambi√©n ofrece im√°genes de ingredientes en PNG (ej: https://www.themealdb.com/images/ingredients/<ingrediente>-Small.png etc.). La app utilizar√° estas im√°genes para enriquecer la experiencia visual: por ejemplo, mostrar la foto de la comida en la vista de detalle de receta externa, y usar iconos de ingredientes tanto en la vista de inventario como en la lista de ingredientes de recetas (locales o externas). Estas im√°genes son de libre uso seg√∫n TheMealDB. Para mantener la interfaz "cute", se pueden mostrar en estilo redondeado o con alg√∫n marco amigable.
   ‚Ä¢ Ejemplo de flujo con API: Supongamos que el usuario busca ‚Äúpasta‚Äù en la vista Recetas con la opci√≥n de internet activada. La app har√° una b√∫squeda local (quiz√° encuentra una receta de ‚ÄúEnsalada de pasta‚Äù guardada) y llamar√° search.php?s=pasta a TheMealDB. De la API quiz√°s reciba ‚ÄúPasta Carbonara‚Äù y ‚ÄúPasta Arrabiata‚Äù entre otras. Mostrar√° ambas listas y podr√° clicar ‚ÄúPasta Carbonara (internet)‚Äù para ver detalles. Al hacerlo, llama lookup.php?i=<id> para Carbonara, obtiene todos los ingredientes (ej. Spaghetti, Eggs, Pancetta, ...), la instrucci√≥n en ingl√©s, etc., y los muestra. Ve que al usuario le faltan Pancetta y Pecorino en su inventario, entonces en ‚ÄúLista de la compra‚Äù pone esos √≠tems con cantidades. Si le interesa, el usuario guarda la receta; ahora ‚ÄúPasta Carbonara‚Äù aparece tambi√©n en sus recetas locales para futuras consultas, y su contenido est√° en IndexedDB disponible offline. Este ejemplo ilustra c√≥mo la API se integra de forma transparente cuando se desea.
7. Interfaz de Usuario y Experiencia (UI/UX)
   El dise√±o de ‚ÄúQu√© Comemos‚Äù se centrar√° en la simplicidad y la calidez, para que usar la app sea agradable a diario. Aspectos clave de la UI/UX:
   ‚Ä¢ Estilo visual: Se optar√° por un estilo cute y amigable, con colores suaves, ilustraciones sencillas de alimentos, y una tipograf√≠a clara. Por ejemplo, √≠conos de verduras/frutas estilo dibujo para acompa√±ar las listas, un logo divertido (quiz√° un plato con una carita pensativa, reflejando la pregunta ‚Äú¬øQu√© comemos?‚Äù). Los elementos interactivos ser√°n grandes y f√°ciles de tocar en m√≥vil. Se evitar√° la saturaci√≥n de texto; en su lugar, se presentar√°n las opciones de forma visual cuando sea posible (ej. un icono de carrito para la lista de compra, un icono de robot/varita m√°gica para indicar generaci√≥n AI).
   ‚Ä¢ Dise√±o responsive: La interfaz estar√° dise√±ada mobile-first, considerando pantallas peque√±as. En m√≥vil, las vistas ser√°n en columnas apiladas: por ejemplo, en Inventario, primero la barra de b√∫squeda, luego botones (A√±adir ingrediente), luego la lista categorizada. En escritorio o tablet, podr√≠a mostrarse en dos columnas (categor√≠as a la izquierda, items a la derecha) para aprovechar espacio. Todas las vistas deben ajustarse sin perder funcionalidad.
   ‚Ä¢ Navegaci√≥n: Habr√° posiblemente una barra de navegaci√≥n principal o men√∫ para acceder a las 3 secciones principales: Inventario, Recetas y Inicio (la vista principal de decidir comida). En m√≥vil, esto podr√≠a ser una barra inferior con iconos (üóíÔ∏è para inventario, üìñ para recetas, üçΩÔ∏è para decidir/comer). En la vista de Inicio, despu√©s de elegir una receta o criterios, la navegaci√≥n a detalles ser√° tipo asistente (wizard) o nueva pantalla de resultados, con posibilidad de volver atr√°s.
   ‚Ä¢ Entradas de usuario: Se cuidar√° que ingresar datos (ingredientes, recetas) sea lo m√°s f√°cil posible. Se usar√°n controles nativos cuando aplique (ej. selecci√≥n m√∫ltiple con checkboxes para ingredientes, campos de texto con autocompletar para ingredientes al a√±adir recetas, etc.). La funcionalidad de b√∫squeda con checkboxes API ya mencionada estar√° claramente rotulada (por ejemplo: [ ] Incluir resultados de Internet junto a la barra de b√∫squeda).
   ‚Ä¢ Feedback y estados: La app dar√° retroalimentaci√≥n inmediata en acciones: al a√±adir ingrediente, un mensaje o icono de check confirmar√° que se guard√≥; al guardar una receta, similar. Durante las operaciones potencialmente lentas (como la generaci√≥n de receta por IA o la carga de resultados de API), se mostrar√° un indicador de carga (un spinner o un simp√°tico icono animado, quiz√° un cocinero pensando). Tambi√©n se manejar√°n errores de forma amable: ej. ‚ÄúNo se pudo conectar con la API externa‚Äù si falla, o ‚ÄúLa IA no pudo generar una receta, intenta de nuevo‚Äù si ocurre un error.
   ‚Ä¢ Lista de la compra UI: La secci√≥n de ‚Äúlista de la compra‚Äù (faltantes) en cada receta se mostrar√° de forma destacada, posiblemente con un icono de carrito. Ser√° probablemente un recuadro con los ingredientes faltantes enumerados. Podr√≠a permitir marcar manualmente cada item como conseguido (simplemente tildando, aunque como la app no persiste esa acci√≥n mucho, ser√≠a temporal). Esto es m√°s para que el usuario pueda utilizar su tel√©fono en la tienda e ir marcando mentalmente; podr√≠a incluso implementarse una funcionalidad de checkbox en cada item de la lista de la compra para que el usuario los marque mientras los mete al carrito, aunque esos cambios no necesariamente se guardar√°n ya que la lista se vuelve a generar cada vez que abre la receta. De cualquier manera, se centrar√° en legibilidad: nombre del ingrediente y cantidad necesaria.
   ‚Ä¢ Soporte biling√ºe: Toda la interfaz tendr√° soporte para ingl√©s y espa√±ol. Esto implica tener un sistema de internacionalizaci√≥n (i18n) con textos traducibles. El usuario podr√° elegir el idioma en ajustes, o se autodetectar√° seg√∫n el idioma del dispositivo al inicio. Las etiquetas de categor√≠as e ingredientes podr√≠an mantenerse en un solo idioma base (probablemente el del usuario) ya que mezclarlas ser√≠a confuso. Documentaci√≥n y ayuda tambi√©n estar√°n biling√ºes si se incluyen.
   ‚Ä¢ Accesibilidad: Al ser una aplicaci√≥n para uso frecuente en casa, consideraremos accesibilidad b√°sica: textos suficientemente contrastados, tama√±os de letra ajustables en CSS, soporte para navegaci√≥n por teclado en desktop, etc. No es prioritario un nivel AAA, pero tenerlo en cuenta.
   ‚Ä¢ Instalaci√≥n PWA: Se proveer√° un archivo manifest para que la app pueda instalarse en el m√≥vil como si fuera nativa (con su icono, nombre ‚ÄúQu√© Comemos‚Äù y pantalla de splash personalizada). Una vez instalada, funcionar√° offline gracias al cacheo de recursos est√°ticos mediante un Service Worker. La experiencia offline incluir√° al menos la disponibilidad de la UI y datos locales; si el usuario intenta acciones que requieren internet (como buscar recetas externas con el checkbox activo) sin conexi√≥n, se mostrar√° un mensaje ‚ÄúSin conexi√≥n ‚Äì mostrando resultados locales‚Äù o se omitir√° esa parte silenciosamente.
   ‚Ä¢ Desempe√±o: Usando React + Vite, la app ser√° ligera y r√°pida. Vite ayudar√° a cargar eficientemente el c√≥digo; el Service Worker cachear√° los archivos est√°ticos para inicio instant√°neo tras la primera carga. Las operaciones en IndexedDB se har√°n de forma as√≠ncrona para no trabar la UI. Para listas largas (ingredientes, recetas), se puede emplear virtualizaci√≥n si es necesario para performance en m√≥viles de bajos recursos.
   ‚Ä¢ Seguridad y permisos: La PWA no requiere permisos especiales excepto quiz√°s el de c√°mara si se implementa en el futuro la funci√≥n de escanear c√≥digos de barras (ver Opcionales). Inicialmente, no pedir√° permisos fuera de la instalaci√≥n PWA normal. Todos los datos se quedan local, y no se manejan datos personales sensibles, as√≠ que no habr√° complejidades de privacidad m√°s all√° de las est√°ndar (la pol√≠tica de TheMealDB no requiere datos de usuario, solo se pide no abusar del API p√∫blico).
8. Detalles T√©cnicos y Consideraciones de Desarrollo
   ‚Ä¢ Stack tecnol√≥gico: Se utilizar√° React junto con TypeScript para el desarrollo front-end, aprovechando la herramienta de bundling Vite para crear el proyecto. Esto ofrece un entorno moderno, con tipado para mayor robustez y facilidades de PWA (plugins de Vite para generar el manifest, etc.). No se prev√© un backend propio ya que toda la l√≥gica ser√° local; sin embargo, para la integraci√≥n con Ollama (IA) se har√° uso de fetch/axios desde el front-end a http://localhost:11434 (u otra URL configurada) para obtener las respuestas del modelo. La API de TheMealDB se consume igualmente via HTTP desde el front-end.
   ‚Ä¢ Arquitectura de datos: Usaremos IndexedDB como base de datos local. Se pueden definir al menos dos almacenes principales: uno para Inventario y otro para Recetas. En inventario almacenaremos objetos de ingrediente con campos: id, nombre, categor√≠a, cantidad, unidad. En recetas, los objetos receta con su estructura mencionada (incluyendo quiz√° sub-objetos o arrays anidados). Podemos utilizar una librer√≠a ligera de IndexedDB (como Dexie.js) para facilitar las consultas, o interactuar con la API async/await nativa directamente. Se asegurar√° integridad referencial b√°sica manualmente: por ejemplo, si se borra un ingrediente del inventario, no se auto-modificar√°n recetas, pero la comprobaci√≥n de disponibilidad simplemente lo tratar√° como faltante. (No borraremos recetas autom√°ticamente porque un ingrediente ya no est√©, pues puede volver a agregarse en el futuro).
   ‚Ä¢ Service Worker: Configuraremos un service worker para caching. Se cachear√° la shell de la aplicaci√≥n (HTML, CSS, JS, √≠conos) para que la PWA cargue offline. Podr√≠amos implementar cache de datos API tambi√©n: por ejemplo, guardar en cache las im√°genes de recetas externas y de ingredientes a medida que se descargan, para no depender de conexi√≥n la pr√≥xima vez. Sin embargo, actualizaremos esos caches de vez en cuando para no quedarnos con datos obsoletos (aunque las recetas de TheMealDB no cambian con mucha frecuencia, podr√≠amos refrescar la lista de recetas externas cada cierto tiempo si la app est√° online).
   ‚Ä¢ Manejo de estados: En React, usaremos probablemente estado global (quiz√° con Context o Zustand) para cosas como el inventario y recetas, de modo que m√∫ltiples componentes puedan acceder (por ejemplo, para que la vista principal consulte el inventario r√°pidamente, o para que tras guardar una nueva receta se actualice la lista en la vista Recetas). Tambi√©n consideraremos las rutas (React Router) para navegar entre vistas.
   ‚Ä¢ Multiplataforma: Al ser PWA, una sola base de c√≥digo cubre Android y web. En Android se podr√° a√±adir a home screen y en Chrome se comportar√° casi como app nativa (fullscreen, etc.). En iOS, aunque PWA tiene algunas limitaciones, tambi√©n deber√≠a funcionar (IndexedDB y caches son soportados). No habr√° c√≥digo nativo espec√≠fico de cada plataforma.
9. Funcionalidades Opcionales / Futuras Mejoras
   Hay ciertas caracter√≠sticas interesantes que se podr√≠an incluir si el tiempo y complejidad lo permiten, pero no son requisitos estrictos de la primera versi√≥n (se implementar√°n solo si no complican excesivamente el desarrollo, seg√∫n la preferencia expresada):
   ‚Ä¢ Escaneo de c√≥digo de barras o texto: Para agilizar la carga del inventario, se podr√≠a integrar la c√°mara del dispositivo para escanear c√≥digos de barras de productos o reconocer texto en etiquetas. Por ejemplo, escanear el c√≥digo de barras de una lata de tomate podr√≠a autocompletar "Tomate triturado 400g". Esto requerir√≠a usar alguna API o librer√≠a de escaneo (posiblemente on-device para mantenerlo offline, aunque existen bases de datos de productos que son online). Dado que esta funcionalidad implica trabajo extra significativo (c√°mara, decodificaci√≥n, base de datos de barcodes), solo se har√° si resulta abordable; de lo contrario, se deja para el futuro.
   ‚Ä¢ Planificador semanal de comidas: M√°s adelante, la app podr√≠a permitir planificar men√∫s para varios d√≠as, asignando recetas a d√≠as de la semana y generando una lista de la compra global para ese plan. Esto ser√≠a √∫til, pero inicialmente el enfoque es en decidir puntualmente cada d√≠a. Se puede considerar en futuras versiones.
   ‚Ä¢ Sincronizaci√≥n en m√∫ltiples dispositivos: Actualmente, los datos residen localmente. Una mejora podr√≠a ser ofrecer copia de seguridad o sincronizaci√≥n (por ejemplo, a trav√©s de Google Drive, Dropbox, o un backend propio ligero) para poder acceder al mismo inventario/recetario desde el m√≥vil y el PC. Implementar sincronizaci√≥n confiable es complejo (manejo de conflictos, autenticaci√≥n, etc.), por lo que no se har√° de inicio. Sin embargo, gracias a la naturaleza PWA, un usuario podr√≠a instalar la app en varios dispositivos pero tendr√≠a que gestionar inventarios separados por ahora.
   ‚Ä¢ Notificaciones y recordatorios: Se podr√≠a enviar una notificaci√≥n (via Service Worker) a cierta hora, preguntando ‚Äú¬øQu√© vas a comer hoy? Abre la app para decidir üòä‚Äù. En Android esto ser√≠a posible; en iOS PWA es limitado. Es un extra de UX que podr√≠a considerarse si no resulta complicado.
   ‚Ä¢ Informaci√≥n nutricional: Con la base de datos de ingredientes disponible, quiz√° se podr√≠a mostrar informaci√≥n nutricional de un ingrediente o incluso de una receta (sumando calor√≠as, etc.). TheMealDB no provee datos nutricionales, as√≠ que habr√≠a que integrar otra fuente o ingresar manualmente. Esto claramente aumentar√≠a mucho el alcance, as√≠ que queda fuera por ahora.
   ‚Ä¢ Modo comunitario: Como mejora a futuro, se podr√≠a permitir al usuario compartir sus recetas generadas o personalizadas con la comunidad, o descargar nuevas recetas de otros. Esto implicar√≠a una parte online social que por ahora no se contempla (aunque usar TheMealDB ya nos da un sabor de comunidad con su base de datos abierta).
10. Resumen y Viabilidad
    En resumen, "Qu√© Comemos" ser√° una aplicaci√≥n web progresiva integral que combina gesti√≥n de despensa, recetario personal, b√∫squeda de recetas online y generaci√≥n de recetas por IA, todo orientado a simplificar la pregunta diaria de qu√© cocinar. La soluci√≥n operar√° principalmente offline (gracias al uso de IndexedDB, cache PWA y un modelo de IA local), cumpliendo as√≠ con la idea de independencia de la nube y rapidez. Al mismo tiempo, ofrecer√° la riqueza de recursos online mediante la integraci√≥n con TheMealDB cuando el usuario lo desee, asegurando acceso a recetas variadas y de calidad[7]. El uso de React+TypeScript garantiza un c√≥digo mantenible y escalable, mientras que la interfaz se centrar√° en ofrecer una UX amigable y divertida para fomentar su uso constante.
    Con estas especificaciones, se cuenta con un plan detallado para el desarrollo de la aplicaci√≥n. Se ha priorizado la funcionalidad principal que resolver√° el problema (decidir recetas basadas en inventario), complement√°ndola con caracter√≠sticas de valor a√±adido (IA, b√∫squedas externas) de forma opcional/controlada. El resultado esperado es una app robusta, √∫til en el d√≠a a d√≠a, y agradable de usar, que cumpla con las necesidades planteadas por el usuario: ‚Äúdecidir qu√© comemos‚Äù ser√° tan sencillo como abrir la app y dejarse guiar por las sugerencias. ¬°Manos a la obra con el desarrollo! üöÄ
